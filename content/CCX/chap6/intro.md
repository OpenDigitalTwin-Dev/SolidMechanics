# 算例研究

记录使用 CCX 计算经典算例的过程


## cgx 用法

cgx 是交互式三维前后处理工具，基于 OpenGL 技术，用于进行建模和结果可视化，其基本用法如下

```
cgx [选项] 文件名 [ccxfile]
```

- 默认选项为 `-v`，启动后处理模式，读取并显示 `frd` 格式的结果文件
- `ccxfile` 为可选参数，默认不填写。仅在需要同时加载求解器输入文件（如 `.inp` 文件），以便在可视化或后处理时识别和显示其中定义的集合（sets）、载荷（loads）、边界条件等信息时使用


| 选项         | 说明                                                                                         | 适用文件/场景                           |
|--------------|--------------------------------------------------------------------------------------------|------------------------------------------|
| `-a`         | 自动构建模式，期望输入由 CAD 导出的几何文件。自动合并、划分线段并计算内部区域，自动显示结构 | CAD 接口程序生成的 fbd 文件（如 vda2fbd）    |
| `-b`         | 构建模式，期望输入fbd格式的几何（命令）文件                                               | 手动或脚本建模、交互保存的fbd文件        |
| `-bg`        | 后台批处理模式，无图形界面输出，其他同`-b`                                                 | 服务器、自动化脚本运行                   |
| `-c`         | 读取求解器输入文件（如 CCX 或 Abaqus 的 inp 文件），识别部分关键字并生成集合                | 求解器输入文件（.inp）                   |
| `-duns2d`    | 读取 DUNS 求解器的 2D 结果文件                                                                | DUNS 2D结果文件                          |
| `-duns3d`    | 读取 DUNS 求解器的 3D 结果文件                                                                | DUNS 3D结果文件                          |
| `-duns2dl`   | 读取 DUNS 求解器的 2D 长格式结果文件                                                          | DUNS 2D 长格式结果文件                    |
| `-duns3dl`   | 读取 DUNS 求解器的 3D 长格式结果文件                                                          | DUNS 3D 长格式结果文件                    |
| `-isaac2d`   | 读取 ISAAC 求解器的 2D 结果文件                                                               | ISAAC 2D结果文件                         |
| `-isaac3d`   | 读取 ISAAC 求解器的 3D 结果文件                                                               | ISAAC 3D结果文件                         |
| `-foam`      | 读取 OpenFOAM 结果目录结构，自动识别时间步目录                                               | OpenFOAM case 目录                        |
| `-f06`       | 读取 Nastran f06 结果文件                                                                   | Nastran f06 文件                          |
| `-ng`        | 读取 Netgen 原生格式（带表面域）                                                            | Netgen 网格文件                           |
| `-step`      | 读取 ASCII-STEP 文件（仅点和线）                                                             | STEP 文件                                 |
| `-stepsplit` | 读取 step 文件并将其各部分分别写入不同目录                                                   | STEP 文件                                 |
| `-stl`       | 读取 STL 文件（三角面片）                                                                   | STL网格文件                              |
| `-vtk`       | 读取 VTK 文件（tet4, qu4，无结果数据）。                                                      | VTK 网格文件                              |
| `-v`         | 默认，读取 frd 格式结果文件，并可选读取求解器输入文件                                        | frd 结果文件（及可选求解器输入文件）       |
| `-mksets`    | 根据 *DLOAD 值创建节点集（集合名为 “_<value>”）                                              | 特殊用途，自动集合生成                   |
| `-read`      | 启动时强制读取完整结果文件                                                                | 大型结果文件，需完整读取                  |


## ccx 用法

ccx 作为求解器，用于有限元求解过程，其输入文件为 `inp` 格式，通常命名为 `solve.inp`，基本用法如下

```
ccx solve
```

## 一般示例运行方法

使用 CCX 进行数值模拟通常包含以下步骤

**1. 前处理**

运行 `cgx` 处理前处理文件，通常命名为 `pre.fbd`，生成几何实体信息，并在计算前进行可视化展示

```
cgx -b pre.fbd
```

**2. 求解**

运行 `ccx` 处理模型文件，通常命名为 `solve.inp`，执行有限元分析，计算结果保存在 `solve.frd` 中

```
ccx solve
```

**3. 后处理**

运行 `cgx` 处理后处理文件，通常命名为 `post.fbd`，对计算结果进行可视化展示

```
cgx -b post.fbd
```

**4. vtk 格式转换**

CCX 本身的后处理和可视化功能较为有限，因此通常会将计算结果转换为 `vtk` 格式，利用 ParaView 等专业可视化软件对结果进行分析和展示

```
python3 ccx2paraview.py solve.frd vtk
```